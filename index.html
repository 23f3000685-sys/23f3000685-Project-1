<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Captcha Solver</title>
  <link rel="stylesheet" href="style.css">
  <script src="script.js" defer></script>
</head>
<body>
  <div class="container">
    <h1>Captcha Solver</h1>
    <img id="captcha" src="" alt="Captcha Image">
    <p id="solution">Solving...</p>
  </div>
</body>
<head>
  <meta charset="UTF-8">
  <title>Evaluator JSON Preview</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h1>Evaluator JSON Preview</h1>
    <pre id="jsonOutput"></pre>
  </div>

  <script>
    // Extract repository and username from current URL
    const hostParts = window.location.host.split('.');
    const username = hostParts[0];
    const pathParts = window.location.pathname.split('/');
    const repoPath = pathParts[1] || "captcha-solver-23f3000685";
    const pagesURL = `https://${username}.github.io/${repoPath}/`;

    // Generate a pseudo dynamic commit SHA (first 7 chars of timestamp hash)
    const commitSHA = Date.now().toString(16).slice(-7);

    // Generate a pseudo nonce if none is provided
    const defaultNonce = 'nonce-' + Math.random().toString(36).slice(2, 10);

    // Read query parameters
    const params = new URLSearchParams(window.location.search);

    const payload = {
      email: params.get("email") || "23f3000685@ds.study.iitm.ac.in",
      task: params.get("task") || repoPath,
      round: parseInt(params.get("round")) || 1,
      nonce: params.get("nonce") || defaultNonce,
      repo_url: params.get("repo_url") || `https://github.com/${username}/${repoPath}`,
      commit_sha: params.get("commit_sha") || commitSHA,
      pages_url: params.get("pages_url") || pagesURL
    };

    // Display JSON
    document.getElementById("jsonOutput").textContent = JSON.stringify(payload, null, 2);
  </script>
</body>
</html>
